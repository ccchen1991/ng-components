(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"5al2":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("D57K"),n=function(e){function t(t,r,o,n){var i=e.call(this,t,o,n)||this;return i.sectionItem=r,i}return Object(o.b)(t,e),t.prototype.get=function(t){return e.prototype.get.call(this,t)},t}(r("3kIJ").h)},C4Bd:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var o=r("D57K"),n=r("3kIJ"),i=r("5al2"),c=r("Ix8t"),a=r("KL6G"),l=r("kZht"),u=r("An66"),m=r("DO7q");function d(e,t){if(1&e&&(l.Rb(0,"h3"),l.Gc(1),l.Qb()),2&e){var r=l.cc().$implicit;l.yb(1),l.Hc(r.value.sectionItem.title)}}function s(e,t){if(1&e&&(l.Rb(0,"span",12),l.Gc(1),l.Qb()),2&e){var r=l.cc(2).$implicit,o=l.cc(2).$implicit,n=l.cc(2);l.yb(1),l.Hc(n.getValidationErrorFor(o.value.sectionItem.key,r.value.formItem))}}function f(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div"),l.Rb(1,"app-dynamic-form-item",10),l.Yb("itemAddedClicked",(function(e){l.uc(r);var t=l.cc(3).$implicit;return l.cc(2).addNewItemToFormArrayWithId(t.key,e)}))("itemRemovedClicked",(function(e){l.uc(r);var t=l.cc(3).$implicit;return l.cc(2).removeItemAtIndexFromFormArrayWithId(t.key,e)})),l.Qb(),l.Ec(2,s,2,1,"span",11),l.Qb()}if(2&e){var o=l.cc().$implicit,n=l.cc(2).$implicit;l.cc();var i=l.tc(1),c=l.cc();l.Bb(o.value.formItem.className),l.yb(1),l.kc("control",o.value)("submitted",i.submitted)("sectionId",n.value.sectionItem.key),l.yb(1),l.kc("ngIf",c.getValidationErrorFor(n.value.sectionItem.key,o.value.formItem))}}function v(e,t){if(1&e&&(l.Pb(0),l.Ec(1,f,3,6,"div",9),l.Ob()),2&e){var r=t.$implicit,o=l.cc(2).$implicit,n=l.cc(2);l.yb(1),l.kc("ngIf",n.shouldRenderControl(o.key,r.value.formItem))}}function y(e,t){if(1&e&&(l.Rb(0,"div"),l.Ec(1,v,2,1,"ng-container",8),l.dc(2,"keyvalue"),l.Qb()),2&e){var r=l.cc().$implicit,o=l.cc(2);l.Bb(r.value.sectionItem.className),l.yb(1),l.kc("ngForOf",l.fc(2,3,r.value.controls,o.orderForm))}}function I(e,t){if(1&e&&(l.Rb(0,"span",12),l.Gc(1),l.Qb()),2&e){var r=l.cc(2).$implicit,o=l.cc().index,n=l.cc(2).$implicit,i=l.cc(2);l.yb(1),l.Hc(i.getValidationErrorFor(n.value.sectionItem.key,r.value.formItem,o))}}function p(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",17),l.Rb(1,"app-dynamic-form-item",18),l.Yb("itemAddedClicked",(function(e){l.uc(r);var t=l.cc(2).index,o=l.cc(2).$implicit;return l.cc(2).addNewItemToFormArrayWithId(o.key,e,t)}))("itemRemovedClicked",(function(e){l.uc(r);var t=l.cc(2).index,o=l.cc(2).$implicit;return l.cc(2).removeItemAtIndexFromFormArrayWithId(o.key,e,t)})),l.Qb(),l.Ec(2,I,2,1,"span",11),l.Qb()}if(2&e){var o=l.cc().$implicit,n=l.cc().index,i=l.cc(2).$implicit;l.cc();var c=l.tc(1),a=l.cc();l.Bb(o.value.formItem.className),l.yb(1),l.kc("control",o.value)("sectionId",i.value.sectionItem.key+o.key+n)("submitted",c.submitted),l.yb(1),l.kc("ngIf",a.getValidationErrorFor(i.value.sectionItem.key,o.value.formItem,n))}}function b(e,t){if(1&e&&(l.Pb(0),l.Ec(1,p,3,6,"div",16),l.Ob()),2&e){var r=t.$implicit,o=l.cc().index,n=l.cc(2).$implicit,i=l.cc(2);l.yb(1),l.kc("ngIf",i.shouldRenderControl(n.value.sectionItem.key,r.value.formItem,o))}}function g(e,t){if(1&e){var r=l.Sb();l.Rb(0,"button",19),l.Yb("click",(function(){l.uc(r);var e=l.cc().index,t=l.cc(2).$implicit;return l.cc(2).removeItemAtIndexFromFormArrayWithId(t.key,null,e)})),l.Gc(1),l.Qb()}if(2&e){var o=l.cc().index,n=l.cc(2).$implicit;l.kc("id",n.value.sectionItem.key+o+"-remove"),l.yb(1),l.Ic(" - Remove ",n.value.sectionItem.title," ")}}function k(e,t){if(1&e&&(l.Rb(0,"div",4),l.Ec(1,b,2,1,"ng-container",8),l.dc(2,"keyvalue"),l.Ec(3,g,2,2,"button",15),l.Qb()),2&e){var r=t.$implicit,o=l.cc(2).$implicit,n=l.cc(2);l.Bb(o.value.sectionItem.className),l.yb(1),l.kc("ngForOf",l.fc(2,4,r.controls,n.orderForm)),l.yb(2),l.kc("ngIf",n.getFormArrayControls(o.value).length>1)}}function h(e,t){if(1&e){var r=l.Sb();l.Ec(0,k,4,7,"div",13),l.Rb(1,"button",14),l.Yb("click",(function(){l.uc(r);var e=l.cc().$implicit;return l.cc(2).addNewItemToFormArrayWithId(e.value.sectionItem.key)})),l.Gc(2),l.Qb()}if(2&e){var o=l.cc().$implicit,n=l.cc(2);l.kc("ngForOf",n.getFormArrayControls(o.value)),l.yb(1),l.kc("id",o.value.sectionItem.key+"-add"),l.yb(1),l.Ic(" + Add new ",o.value.sectionItem.title," ")}}function F(e,t){if(1&e&&(l.Rb(0,"div",4),l.Ec(1,d,2,1,"h3",5),l.Ec(2,y,3,6,"div",6),l.Ec(3,h,3,3,"ng-template",null,7,l.Fc),l.Qb()),2&e){var r=t.$implicit,o=l.tc(4);l.yb(1),l.kc("ngIf",r.value.sectionItem.title),l.yb(1),l.kc("ngIf",!r.value.sectionItem.multi)("ngIfElse",o)}}function x(e,t){if(1&e&&(l.Rb(0,"form",1,2),l.Ec(2,F,5,3,"div",3),l.dc(3,"keyvalue"),l.Qb()),2&e){var r=l.cc();l.kc("formGroup",r.extendedFormGroup),l.yb(2),l.kc("ngForOf",l.fc(3,2,r.extendedFormGroup.controls,r.orderForm))}}var w=function(){function e(e){var t=this;this.formService=e,this.orderForm=function(e,t){return e.value.sectionItem&&t.value.sectionItem?e.value.sectionItem.order-t.value.sectionItem.order:e.value.formItem&&t.value.formItem?e.value.formItem.order-t.value.formItem.order:0},this.getValidationErrorFor=function(e,r,o){var n,i;return!t.validationErrors||t.validationErrors&&!t.validationErrors.length?null:((i=t.validationErrors.filter(o?function(t){return t.sectionId===e&&t.sectionIndex===o}:function(t){return t.sectionId===e}))&&i.length&&i.forEach((function(e){e.key===r.key&&(n=e.errorMessage)})),n)}}return e.prototype.shouldRenderControl=function(e,t,r){var n,i,c,a;if(t.rulerKey){var l=void 0;if(r>-1){var u=this.extendedFormGroup.get(e).at(r).get(t.rulerKey);u&&(l=u)}else l=this.extendedFormGroup.get(e).get(t.rulerKey);var m=l.value,d=t.condition;if(void 0===m||void 0===d)return console.warn("Something went wrong in shouldRenderControl: Ruler value or condition could not be found."),!1;if("string"==typeof m&&m===d)return this.shouldRenderControl(e,l.formItem,r);if(m&&d&&"object"==typeof d&&Array.isArray(d))try{for(var s=Object(o.d)(d),f=s.next();!f.done;f=s.next()){var v=f.value;if(v)if("object"==typeof m&&Array.isArray(m))try{for(var y=(c=void 0,Object(o.d)(m)),I=y.next();!I.done;I=y.next()){var p=I.value;if(p&&p.value===v.value&&p.key===v.key)return this.shouldRenderControl(e,l.formItem,r)}}catch(b){c={error:b}}finally{try{I&&!I.done&&(a=y.return)&&a.call(y)}finally{if(c)throw c.error}}else if("object"==typeof m&&!Array.isArray(m)&&m&&m.value===v.value&&m.key===v.key)return this.shouldRenderControl(e,l.formItem,r)}}catch(g){n={error:g}}finally{try{f&&!f.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}else{if(m&&"object"==typeof m&&!Array.isArray(m)&&m.value===d.value)return this.shouldRenderControl(e,l.formItem,r);if(m&&"boolean"==typeof m&&m===d)return this.shouldRenderControl(e,l.formItem,r)}return!1}return!0},e.prototype.addNewItemToFormArrayWithId=function(e,t,r){if(t)r>-1?(o=this.extendedFormGroup.get(e).at(r)).get(t).push(new n.f("")):this.extendedFormGroup.get(e).get(t).push(new n.f(""));else{var o=this.extendedFormGroup.get(e),c=this.formService.dynamicFormItemsToControls(o.sectionItem.items),a=new i.a(c,o.sectionItem);o.push(a)}},e.prototype.removeItemAtIndexFromFormArrayWithId=function(e,t,r){t&&t.id?r>-1?this.extendedFormGroup.get(e).at(r).get(t.id).removeAt(t.index):this.extendedFormGroup.get(e).get(t.id).removeAt(t.index):r>-1?this.extendedFormGroup.get(e).removeAt(r):console.warn("Error at removeItemAtIndexFromFormArrayWithId: Tried to remove section but no section index was provided")},e.prototype.getFormArrayControls=function(e){return e instanceof c.a?e.controls:(console.warn("Error in getFormArrayControls: control is not an instance of ExtendedFormGroupArray"),[])},e.\u0275fac=function(t){return new(t||e)(l.Lb(a.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-dynamic-form"]],inputs:{extendedFormGroup:"extendedFormGroup",validationErrors:"validationErrors"},features:[l.xb([a.a])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["ngForm","ngForm"],["class","dynamic-form-section-item",4,"ngFor","ngForOf"],[1,"dynamic-form-section-item"],[4,"ngIf"],[3,"class",4,"ngIf","ngIfElse"],["multi",""],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],[3,"control","submitted","sectionId","itemAddedClicked","itemRemovedClicked"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],["class","dynamic-form-section-item",3,"class",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-sm","btn-secondary",3,"id","click"],["class","btn btn-sm btn-outline-danger","type","button",3,"id","click",4,"ngIf"],["class","form-group",3,"class",4,"ngIf"],[1,"form-group"],[3,"control","sectionId","submitted","itemAddedClicked","itemRemovedClicked"],["type","button",1,"btn","btn-sm","btn-outline-danger",3,"id","click"]],template:function(e,t){1&e&&l.Ec(0,x,4,5,"form",0),2&e&&l.kc("ngIf",t.extendedFormGroup)},directives:[u.t,n.D,n.o,n.i,u.s,m.a],pipes:[u.l],styles:[".dynamic-form-section-item {\n                margin-bottom: 1.5rem;\n            }"]}),e}()},Ix8t:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var o=r("D57K"),n=function(e){function t(t,r){var o=e.call(this,t)||this;return o.sectionItem=r,o}return Object(o.b)(t,e),t}(r("3kIJ").e)},KL6G:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o=r("D57K"),n=r("3kIJ"),i=r("OMTH"),c=r("5al2"),a=function(e){function t(t,r,o){var i=e.call(this,r,t.required?n.B.required:null,o)||this;return i.options=[],i.formItem=t,i.options=t.options?t.options:null,i}return Object(o.b)(t,e),t}(n.f),l=r("9K5+"),u=r("Ix8t"),m=r("kZht"),d=function(){function e(){}return e.prototype.dynamicFormSectionsToFormGroup=function(e){var t=this,r={};return e.sort((function(e,t){return e.order-t.order})).forEach((function(e){if(e.multi){var o=t.dynamicFormItemsToControls(e.items),n=new c.a(o,e);r[e.key]=new u.a([n],e)}else o=t.dynamicFormItemsToControls(e.items),r[e.key]=new c.a(o,e)})),new c.a(r)},e.prototype.dynamicFormItemsToControls=function(e){var t={};return e.sort((function(e,t){return e.order-t.order})).forEach((function(e){if(e.controlType===i.a.Text&&e.multi){var r=e.value?e.value.map((function(e){return new n.f(e)})):[new n.f("")];t[e.key]=new l.a(e,r)}else t[e.key]=new a(e,e.value)})),t},e.prototype.dynamicFormItemsToFormGroup=function(e){var t=this.dynamicFormItemsToControls(e);return new c.a(t)},e.prototype.formToDynamicFormResponseItems=function(e,t){var r,n,i=[],c=function(r){var n,c,a=t.get(r);if(a)if(a instanceof u.a)a.controls.map((function(t,n){var c,a;try{for(var l=(c=void 0,Object(o.d)(Object.keys(e[r][n]))),u=l.next();!u.done;u=l.next()){var m=u.value,d=t.get(m)||null;d&&i.push({key:m,formItem:d.formItem,value:d.value,sectionId:r,sectionIndex:n})}}catch(s){c={error:s}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(c)throw c.error}}}));else try{for(var l=(n=void 0,Object(o.d)(Object.keys(e[r]))),m=l.next();!m.done;m=l.next()){var d=m.value,s=a.get(d)||null;s&&i.push({key:d,formItem:s.formItem,value:s.value,sectionId:r,sectionIndex:0})}}catch(f){n={error:f}}finally{try{m&&!m.done&&(c=l.return)&&c.call(l)}finally{if(n)throw n.error}}};try{for(var a=Object(o.d)(Object.keys(e)),l=a.next();!l.done;l=a.next())c(l.value)}catch(m){r={error:m}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e.\u0275prov=m.Hb({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()}}]);